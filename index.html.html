<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML è½‰ WordPress å€å¡Šå·¥å…· v4.0 - CSSåˆ†é›¢å„ªåŒ–ç‰ˆ</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Microsoft JhengHei", sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
        }

        .header h1 {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .version-badge {
            display: inline-block;
            background: #10b981;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            margin-left: 10px;
        }

        .optimized-badge {
            background: #3b82f6;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            margin-left: 10px;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
            margin-bottom: 20px;
        }

        .output-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 20px;
        }

        @media (max-width: 968px) {
            .output-grid {
                grid-template-columns: 1fr;
            }
        }

        .panel {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
        }

        .panel-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e5e7eb;
        }

        .panel-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #1e293b;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .textarea {
            width: 100%;
            min-height: 300px;
            padding: 15px;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 13px;
            line-height: 1.6;
            resize: vertical;
        }

        .textarea:focus {
            outline: none;
            border-color: #667eea;
        }

        .input-area {
            min-height: 200px;
        }

        .output-area {
            background: #f9fafb;
        }

        .css-area {
            background: #1e293b;
            color: #e2e8f0;
            font-size: 12px;
        }

        button {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            color: white;
        }

        .btn-convert {
            background: #10b981;
            font-size: 16px;
            padding: 14px 32px;
        }

        .btn-convert:hover {
            background: #059669;
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(16, 185, 129, 0.3);
        }

        .btn-clear {
            background: #ef4444;
        }

        .btn-clear:hover {
            background: #dc2626;
        }

        .btn-copy {
            background: #3b82f6;
        }

        .btn-copy:hover {
            background: #2563eb;
        }

        .btn-sample {
            background: #6b7280;
            margin-right: 10px;
        }

        .btn-sample:hover {
            background: #4b5563;
        }

        .sample-buttons {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }

        .controls {
            text-align: center;
            margin-bottom: 20px;
        }

        .message {
            padding: 12px 16px;
            border-radius: 8px;
            margin-top: 10px;
            display: none;
        }

        .message.show {
            display: block;
        }

        .message.success {
            background: #d1fae5;
            color: #065f46;
            border: 1px solid #6ee7b7;
        }

        .message.error {
            background: #fee2e2;
            color: #991b1b;
            border: 1px solid #fca5a5;
        }

        .info-panel {
            background: #fef3c7;
            border: 2px solid #f59e0b;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .info-title {
            font-weight: 600;
            color: #92400e;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .info-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .info-item {
            display: flex;
            align-items: flex-start;
            gap: 8px;
        }

        .info-icon {
            color: #f59e0b;
            font-size: 1.2rem;
            margin-top: 2px;
        }

        .info-text {
            color: #92400e;
            line-height: 1.5;
            font-size: 0.9rem;
        }

        .stats-bar {
            background: #f3f4f6;
            padding: 10px 15px;
            border-radius: 8px;
            margin-top: 10px;
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .stat-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.85rem;
        }

        .stat-value {
            font-weight: 600;
            color: #1e293b;
        }

        .footer {
            text-align: center;
            color: white;
            margin-top: 40px;
            padding: 20px;
        }

        code {
            background: rgba(255,255,255,0.2);
            padding: 2px 6px;
            border-radius: 4px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <h1>
                ğŸš€ HTML è½‰ WordPress å€å¡Šå·¥å…·
                <span class="version-badge">v4.0</span>
                <span class="optimized-badge">CSS åˆ†é›¢å„ªåŒ–</span>
            </h1>
            <p style="margin-top: 10px;">è‡ªå‹•åˆ†é›¢ CSSï¼Œå„ªåŒ–è¼‰å…¥é€Ÿåº¦èˆ‡ SEO</p>
        </div>

        <!-- Info Panel -->
        <div class="info-panel">
            <div class="info-title">
                âš¡ å„ªåŒ–ç‰¹è‰²
            </div>
            <div class="info-grid">
                <div class="info-item">
                    <span class="info-icon">âœ¨</span>
                    <span class="info-text">è‡ªå‹•ç”Ÿæˆç°¡çŸ­é¡åˆ¥åç¨± (wp-b1, wp-b2)</span>
                </div>
                <div class="info-item">
                    <span class="info-icon">ğŸ¨</span>
                    <span class="info-text">CSS å®Œå…¨åˆ†é›¢ï¼Œå¯å¿«å–å„ªåŒ–</span>
                </div>
                <div class="info-item">
                    <span class="info-icon">ğŸ“¦</span>
                    <span class="info-text">è‡ªå‹•åˆä½µé‡è¤‡æ¨£å¼ï¼Œæ¸›å°‘æª”æ¡ˆå¤§å°</span>
                </div>
                <div class="info-item">
                    <span class="info-icon">ğŸ”</span>
                    <span class="info-text">SEO å‹å–„ï¼ŒHTML çµæ§‹æ¸…æ™°</span>
                </div>
            </div>
        </div>

        <!-- Main Grid -->
        <div class="main-grid">
            <!-- Input Panel -->
            <div class="panel">
                <div class="panel-header">
                    <span class="panel-title">
                        ğŸ“¥ è¼¸å…¥ HTML
                    </span>
                    <div>
                        <button class="btn-clear" onclick="clearAll()">æ¸…é™¤</button>
                    </div>
                </div>
                
                <div class="sample-buttons">
                    <button class="btn-sample" onclick="loadSample('simple')">ç°¡å–®ç¯„ä¾‹</button>
                    <button class="btn-sample" onclick="loadSample('styled')">å«æ¨£å¼ç¯„ä¾‹</button>
                    <button class="btn-sample" onclick="loadSample('complex')">è¤‡é›œçµæ§‹</button>
                </div>
                
                <textarea 
                    id="htmlInput" 
                    class="textarea input-area" 
                    placeholder="è²¼ä¸Šä½ çš„ HTML ç¨‹å¼ç¢¼..."
                ></textarea>
            </div>
        </div>

        <!-- Convert Button -->
        <div class="controls">
            <button class="btn-convert" onclick="convertHTML()">ğŸ”„ æ™ºèƒ½è½‰æ›ï¼ˆCSS åˆ†é›¢ï¼‰</button>
        </div>

        <!-- Output Grid -->
        <div class="output-grid">
            <!-- WordPress Blocks Output -->
            <div class="panel">
                <div class="panel-header">
                    <span class="panel-title">
                        ğŸ“¤ WordPress å€å¡Šï¼ˆä¹¾æ·¨ç‰ˆï¼‰
                    </span>
                    <button class="btn-copy" onclick="copyBlocks()">è¤‡è£½å€å¡Š</button>
                </div>
                <textarea 
                    id="blocksOutput" 
                    class="textarea output-area" 
                    placeholder="WordPress å€å¡Šç¨‹å¼ç¢¼ï¼ˆåªæœ‰é¡åˆ¥åç¨±ï¼Œç„¡å…§è¯æ¨£å¼ï¼‰" 
                    readonly
                ></textarea>
                <div class="stats-bar">
                    <div class="stat-item">
                        <span>å€å¡Šæ•¸é‡ï¼š</span>
                        <span class="stat-value" id="blockCount">0</span>
                    </div>
                    <div class="stat-item">
                        <span>HTML å¤§å°ï¼š</span>
                        <span class="stat-value" id="htmlSize">0 KB</span>
                    </div>
                </div>
                <div id="blockMessage" class="message"></div>
            </div>

            <!-- CSS Output -->
            <div class="panel">
                <div class="panel-header">
                    <span class="panel-title">
                        ğŸ¨ åˆ†é›¢çš„ CSS
                    </span>
                    <button class="btn-copy" onclick="copyCSS()">è¤‡è£½ CSS</button>
                </div>
                <textarea 
                    id="cssOutput" 
                    class="textarea css-area" 
                    placeholder="/* å„ªåŒ–å¾Œçš„ CSS */
/* è²¼åˆ°å¤–è§€ > è‡ªè¨‚ > é¡å¤–çš„ CSS */" 
                    readonly
                ></textarea>
                <div class="stats-bar">
                    <div class="stat-item">
                        <span>CSS è¦å‰‡ï¼š</span>
                        <span class="stat-value" id="cssRuleCount">0</span>
                    </div>
                    <div class="stat-item">
                        <span>CSS å¤§å°ï¼š</span>
                        <span class="stat-value" id="cssSize">0 KB</span>
                    </div>
                    <div class="stat-item">
                        <span>ç¯€çœï¼š</span>
                        <span class="stat-value" id="savedSize">0%</span>
                    </div>
                </div>
                <div id="cssMessage" class="message"></div>
            </div>
        </div>

        <!-- Footer -->
        <div class="footer">
            <p>ğŸ’¡ <strong>ä½¿ç”¨æ–¹å¼</strong>ï¼šå€å¡Šè²¼åˆ°ç·¨è¼¯å™¨ï¼ˆ<code>Ctrl+Shift+Alt+M</code>ï¼‰ï¼ŒCSS è²¼åˆ°å¤–è§€è‡ªè¨‚</p>
            <p style="margin-top: 10px;">v4.0 - é‡å°æ•ˆèƒ½èˆ‡ SEO å„ªåŒ–</p>
        </div>
    </div>

    <script>
        // ========== v4.0 CSS åˆ†é›¢å„ªåŒ–å¼•æ“ ==========
        
        class OptimizedBlockConverter {
            constructor() {
                this.classCounter = 0;
                this.cssRules = new Map();
                this.classMap = new Map();
                this.stats = {
                    blocks: 0,
                    cssRules: 0,
                    originalSize: 0,
                    optimizedSize: 0
                };
            }
            
            convert(html) {
                try {
                    // é‡ç½®è¨ˆæ•¸å™¨
                    this.classCounter = 0;
                    this.cssRules.clear();
                    this.classMap.clear();
                    this.stats = { blocks: 0, cssRules: 0, originalSize: 0, optimizedSize: 0 };
                    
                    // è§£æ HTML
                    const parser = new DOMParser();
                    const doc = parser.parseFromString(html, 'text/html');
                    
                    // è¨˜éŒ„åŸå§‹å¤§å°
                    this.stats.originalSize = html.length;
                    
                    // æå–ä¸¦ç§»é™¤ style æ¨™ç±¤
                    this.extractStyleTags(doc);
                    
                    // è½‰æ›å…ƒç´ 
                    const blocks = [];
                    for (let child of doc.body.children) {
                        const block = this.elementToBlock(child);
                        if (block) {
                            blocks.push(block);
                            this.stats.blocks++;
                        }
                    }
                    
                    // ç”Ÿæˆè¼¸å‡º
                    const blockCode = blocks.join('\n\n');
                    const cssCode = this.generateOptimizedCSS();
                    
                    // è¨ˆç®—å„ªåŒ–å¾Œå¤§å°
                    this.stats.optimizedSize = blockCode.length;
                    
                    return {
                        blocks: blockCode,
                        css: cssCode,
                        stats: this.stats
                    };
                    
                } catch (error) {
                    console.error('Conversion error:', error);
                    throw new Error('è½‰æ›å¤±æ•—: ' + error.message);
                }
            }
            
            extractStyleTags(doc) {
                const styleTags = doc.querySelectorAll('style');
                styleTags.forEach(tag => {
                    const css = tag.textContent;
                    // ç°¡å–®è§£æ CSS è¦å‰‡
                    const rules = css.match(/[^{}]+{[^}]+}/g) || [];
                    rules.forEach(rule => {
                        const [selector, styles] = rule.split('{');
                        if (selector && styles) {
                            const cleanSelector = selector.trim();
                            const cleanStyles = styles.replace('}', '').trim();
                            this.cssRules.set(cleanSelector, cleanStyles);
                        }
                    });
                    tag.remove();
                });
            }
            
            elementToBlock(element) {
                const tagName = element.tagName.toLowerCase();
                
                // è™•ç†æ¨£å¼
                const className = this.processElementStyles(element);
                
                // æ ¹æ“šæ¨™ç±¤é¡å‹ç”Ÿæˆå€å¡Š
                switch(tagName) {
                    case 'h1':
                    case 'h2':
                    case 'h3':
                    case 'h4':
                    case 'h5':
                    case 'h6':
                        return this.headingBlock(element, className);
                    case 'p':
                        return this.paragraphBlock(element, className);
                    case 'div':
                    case 'section':
                    case 'article':
                        return this.groupBlock(element, className);
                    case 'img':
                    case 'figure':
                        return this.imageBlock(element, className);
                    case 'ul':
                    case 'ol':
                        return this.listBlock(element, className);
                    case 'blockquote':
                        return this.quoteBlock(element, className);
                    case 'button':
                    case 'a':
                        if (this.isButton(element)) {
                            return this.buttonBlock(element, className);
                        }
                        return this.paragraphBlock(element, className);
                    case 'hr':
                        return this.separatorBlock();
                    default:
                        return this.groupBlock(element, className);
                }
            }
            
            processElementStyles(element) {
                const inlineStyle = element.getAttribute('style');
                const existingClass = element.className;
                
                if (!inlineStyle && !existingClass) {
                    return '';
                }
                
                // ç”Ÿæˆå”¯ä¸€çš„é¡åˆ¥åç¨±
                const className = this.generateClassName();
                
                // åˆä½µæ‰€æœ‰æ¨£å¼
                let styles = '';
                
                // è™•ç†ç¾æœ‰é¡åˆ¥çš„æ¨£å¼
                if (existingClass) {
                    const classes = existingClass.split(' ');
                    classes.forEach(cls => {
                        if (this.cssRules.has('.' + cls)) {
                            styles += this.cssRules.get('.' + cls) + '; ';
                        }
                    });
                }
                
                // è™•ç†å…§è¯æ¨£å¼
                if (inlineStyle) {
                    styles += inlineStyle;
                }
                
                // å„ªåŒ–æ¨£å¼
                if (styles) {
                    const optimizedStyles = this.optimizeStyles(styles);
                    this.classMap.set(className, optimizedStyles);
                    this.stats.cssRules++;
                }
                
                return className;
            }
            
            generateClassName() {
                this.classCounter++;
                return `wp-b${this.classCounter}`;
            }
            
            optimizeStyles(styles) {
                // ç§»é™¤å¤šé¤˜ç©ºç™½å’Œåˆ†è™Ÿ
                return styles
                    .replace(/\s+/g, ' ')
                    .replace(/;\s*;/g, ';')
                    .replace(/;\s*$/g, '')
                    .trim();
            }
            
            headingBlock(element, className) {
                const level = parseInt(element.tagName[1]);
                const content = element.innerHTML;
                
                const attrs = { level: level };
                if (className) {
                    attrs.className = className;
                }
                
                const attrString = this.formatAttributes(attrs);
                const classAttr = className ? ` class="${className}"` : '';
                
                return `<!-- wp:heading${attrString} -->
<h${level}${classAttr}>${content}</h${level}>
<!-- /wp:heading -->`;
            }
            
            paragraphBlock(element, className) {
                const content = element.innerHTML;
                
                const attrs = {};
                if (className) {
                    attrs.className = className;
                }
                
                const attrString = this.formatAttributes(attrs);
                const classAttr = className ? ` class="${className}"` : '';
                
                return `<!-- wp:paragraph${attrString} -->
<p${classAttr}>${content}</p>
<!-- /wp:paragraph -->`;
            }
            
            groupBlock(element, className) {
                const tagName = element.tagName.toLowerCase();
                
                // æª¢æŸ¥æ˜¯å¦ç‚ºæ¬„ä½çµæ§‹
                if (this.isColumnsStructure(element)) {
                    return this.columnsBlock(element);
                }
                
                // è™•ç†å­å…ƒç´ 
                const innerBlocks = [];
                for (let child of element.children) {
                    const childBlock = this.elementToBlock(child);
                    if (childBlock) {
                        innerBlocks.push(childBlock);
                        this.stats.blocks++;
                    }
                }
                
                const attrs = {};
                if (tagName !== 'div') {
                    attrs.tagName = tagName;
                }
                if (className) {
                    attrs.className = className;
                }
                
                const attrString = this.formatAttributes(attrs);
                const classAttr = className ? ` class="${className}"` : '';
                
                const content = innerBlocks.join('\n') || element.innerHTML;
                
                return `<!-- wp:group${attrString} -->
<div${classAttr}>${content}</div>
<!-- /wp:group -->`;
            }
            
            columnsBlock(element) {
                const columns = [];
                
                for (let child of element.children) {
                    const className = this.processElementStyles(child);
                    columns.push(this.columnBlock(child, className));
                }
                
                return `<!-- wp:columns -->
<div class="wp-block-columns">${columns.join('')}</div>
<!-- /wp:columns -->`;
            }
            
            columnBlock(element, className) {
                const innerBlocks = [];
                for (let child of element.children) {
                    const childBlock = this.elementToBlock(child);
                    if (childBlock) {
                        innerBlocks.push(childBlock);
                    }
                }
                
                const classAttr = className ? ` ${className}` : '';
                const content = innerBlocks.join('\n') || element.innerHTML;
                
                return `<!-- wp:column${className ? ` {"className":"${className}"}` : ''} -->
<div class="wp-block-column${classAttr}">${content}</div>
<!-- /wp:column -->`;
            }
            
            imageBlock(element, className) {
                let img = element;
                if (element.tagName.toLowerCase() === 'figure') {
                    img = element.querySelector('img');
                }
                
                if (!img) return '';
                
                const src = img.src || '';
                const alt = img.alt || '';
                
                const attrs = {};
                if (className) {
                    attrs.className = className;
                }
                
                const attrString = this.formatAttributes(attrs);
                const classAttr = className ? ` ${className}` : '';
                
                return `<!-- wp:image${attrString} -->
<figure class="wp-block-image${classAttr}"><img src="${src}" alt="${alt}"/></figure>
<!-- /wp:image -->`;
            }
            
            listBlock(element, className) {
                const isOrdered = element.tagName.toLowerCase() === 'ol';
                const attrs = {};
                if (isOrdered) {
                    attrs.ordered = true;
                }
                if (className) {
                    attrs.className = className;
                }
                
                const attrString = this.formatAttributes(attrs);
                const tagName = isOrdered ? 'ol' : 'ul';
                const classAttr = className ? ` class="${className}"` : '';
                
                return `<!-- wp:list${attrString} -->
<${tagName}${classAttr}>${element.innerHTML}</${tagName}>
<!-- /wp:list -->`;
            }
            
            quoteBlock(element, className) {
                const attrs = {};
                if (className) {
                    attrs.className = className;
                }
                
                const attrString = this.formatAttributes(attrs);
                const classAttr = className ? ` ${className}` : '';
                
                return `<!-- wp:quote${attrString} -->
<blockquote class="wp-block-quote${classAttr}">${element.innerHTML}</blockquote>
<!-- /wp:quote -->`;
            }
            
            buttonBlock(element, className) {
                const text = element.textContent;
                const href = element.href || '#';
                
                const attrs = {};
                if (className) {
                    attrs.className = className;
                }
                
                const attrString = this.formatAttributes(attrs);
                const classAttr = className ? ` ${className}` : '';
                
                return `<!-- wp:buttons -->
<div class="wp-block-buttons"><!-- wp:button${attrString} -->
<div class="wp-block-button${classAttr}"><a class="wp-block-button__link wp-element-button">${text}</a></div>
<!-- /wp:button --></div>
<!-- /wp:buttons -->`;
            }
            
            separatorBlock() {
                return `<!-- wp:separator -->
<hr class="wp-block-separator has-alpha-channel-opacity"/>
<!-- /wp:separator -->`;
            }
            
            isColumnsStructure(element) {
                const className = element.className ? element.className.toLowerCase() : '';
                const style = element.getAttribute('style') || '';
                
                return className.includes('row') || 
                       className.includes('columns') || 
                       className.includes('grid') ||
                       style.includes('display: flex') ||
                       style.includes('display: grid');
            }
            
            isButton(element) {
                const tagName = element.tagName.toLowerCase();
                const className = element.className ? element.className.toLowerCase() : '';
                
                return tagName === 'button' || 
                       (tagName === 'a' && (className.includes('btn') || className.includes('button')));
            }
            
            formatAttributes(attrs) {
                if (!attrs || Object.keys(attrs).length === 0) {
                    return '';
                }
                
                const cleaned = {};
                for (let [key, value] of Object.entries(attrs)) {
                    if (value !== null && value !== undefined && value !== '') {
                        cleaned[key] = value;
                    }
                }
                
                if (Object.keys(cleaned).length === 0) {
                    return '';
                }
                
                return ' ' + JSON.stringify(cleaned);
            }
            
            generateOptimizedCSS() {
                if (this.classMap.size === 0) {
                    return '/* æ²’æœ‰éœ€è¦çš„ CSS æ¨£å¼ */';
                }
                
                let css = '/* WordPress å€å¡Šå„ªåŒ–æ¨£å¼ */\n';
                css += '/* ç”± HTML è½‰ WordPress v4.0 è‡ªå‹•ç”Ÿæˆ */\n\n';
                
                // ç”Ÿæˆå„ªåŒ–çš„ CSS
                const sortedClasses = Array.from(this.classMap.entries()).sort((a, b) => {
                    return a[0].localeCompare(b[0]);
                });
                
                sortedClasses.forEach(([className, styles]) => {
                    css += `.${className} {\n`;
                    
                    // æ ¼å¼åŒ–æ¨£å¼
                    const styleArray = styles.split(';').filter(s => s.trim());
                    styleArray.forEach(style => {
                        const trimmed = style.trim();
                        if (trimmed) {
                            css += `  ${trimmed};\n`;
                        }
                    });
                    
                    css += '}\n\n';
                });
                
                return css;
            }
        }
        
        // ========== ä¸»å‡½æ•¸ ==========
        
        function convertHTML() {
            const input = document.getElementById('htmlInput').value;
            
            if (!input.trim()) {
                showMessage('blockMessage', 'è«‹è¼¸å…¥ HTML ç¨‹å¼ç¢¼', 'error');
                return;
            }
            
            try {
                const converter = new OptimizedBlockConverter();
                const result = converter.convert(input);
                
                // é¡¯ç¤ºçµæœ
                document.getElementById('blocksOutput').value = result.blocks;
                document.getElementById('cssOutput').value = result.css;
                
                // æ›´æ–°çµ±è¨ˆ
                document.getElementById('blockCount').textContent = result.stats.blocks;
                document.getElementById('cssRuleCount').textContent = result.stats.cssRules;
                
                const htmlSize = (result.blocks.length / 1024).toFixed(2);
                const cssSize = (result.css.length / 1024).toFixed(2);
                const saved = ((1 - result.stats.optimizedSize / result.stats.originalSize) * 100).toFixed(1);
                
                document.getElementById('htmlSize').textContent = `${htmlSize} KB`;
                document.getElementById('cssSize').textContent = `${cssSize} KB`;
                document.getElementById('savedSize').textContent = `${saved}%`;
                
                showMessage('blockMessage', 'âœ… è½‰æ›æˆåŠŸï¼CSS å·²åˆ†é›¢å„ªåŒ–', 'success');
            } catch (error) {
                console.error('Conversion error:', error);
                showMessage('blockMessage', 'âŒ è½‰æ›å¤±æ•—: ' + error.message, 'error');
            }
        }
        
        function clearAll() {
            document.getElementById('htmlInput').value = '';
            document.getElementById('blocksOutput').value = '';
            document.getElementById('cssOutput').value = '';
            document.getElementById('blockCount').textContent = '0';
            document.getElementById('cssRuleCount').textContent = '0';
            document.getElementById('htmlSize').textContent = '0 KB';
            document.getElementById('cssSize').textContent = '0 KB';
            document.getElementById('savedSize').textContent = '0%';
            hideMessages();
        }
        
        function copyBlocks() {
            copyToClipboard('blocksOutput', 'blockMessage', 'å€å¡Šç¨‹å¼ç¢¼');
        }
        
        function copyCSS() {
            copyToClipboard('cssOutput', 'cssMessage', 'CSS æ¨£å¼');
        }
        
        function copyToClipboard(elementId, messageId, type) {
            const element = document.getElementById(elementId);
            if (!element.value) {
                showMessage(messageId, `æ²’æœ‰${type}å¯è¤‡è£½`, 'error');
                return;
            }
            
            element.select();
            document.execCommand('copy');
            showMessage(messageId, `âœ… ${type}å·²è¤‡è£½`, 'success');
        }
        
        function showMessage(elementId, text, type) {
            const element = document.getElementById(elementId);
            element.textContent = text;
            element.className = `message show ${type}`;
            
            setTimeout(() => hideMessages(), 3000);
        }
        
        function hideMessages() {
            document.querySelectorAll('.message').forEach(el => {
                el.className = 'message';
            });
        }
        
        function loadSample(type) {
            const samples = {
                simple: `<h1>æ­¡è¿ä¾†åˆ°æˆ‘çš„ç¶²ç«™</h1>
<p>é€™æ˜¯ä¸€å€‹æ®µè½ï¼Œå±•ç¤ºåŸºæœ¬çš„æ–‡å­—å…§å®¹ã€‚</p>
<img src="https://via.placeholder.com/600x400" alt="ç¯„ä¾‹åœ–ç‰‡">`,

                styled: `<style>
.hero-section {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    padding: 60px 20px;
}
.hero-title {
    color: white;
    font-size: 3rem;
    text-align: center;
    margin-bottom: 20px;
}
.hero-text {
    color: rgba(255,255,255,0.9);
    font-size: 1.2rem;
    text-align: center;
}
</style>

<div class="hero-section">
    <h1 class="hero-title">å‰µæ–°è§£æ±ºæ–¹æ¡ˆ</h1>
    <p class="hero-text">ç‚ºæ‚¨çš„æ¥­å‹™æä¾›æœ€ä½³å·¥å…·</p>
</div>`,

                complex: `<style>
.container { max-width: 1200px; margin: 0 auto; padding: 20px; }
.row { display: flex; gap: 30px; margin-bottom: 30px; }
.col { flex: 1; padding: 20px; background: #f8f9fa; border-radius: 8px; }
.col h3 { color: #333; margin-bottom: 10px; }
.col p { color: #666; line-height: 1.6; }
.btn { display: inline-block; padding: 10px 20px; background: #007bff; color: white; text-decoration: none; border-radius: 5px; }
</style>

<div class="container">
    <h1 style="text-align: center; color: #1e293b; margin-bottom: 40px;">æˆ‘å€‘çš„æœå‹™</h1>
    <div class="row">
        <div class="col">
            <h3>ç¶²é è¨­è¨ˆ</h3>
            <p>å°ˆæ¥­çš„ç¶²é è¨­è¨ˆæœå‹™ï¼Œæ‰“é€ ç¨ç‰¹å“ç‰Œå½¢è±¡</p>
            <a href="#" class="btn">äº†è§£æ›´å¤š</a>
        </div>
        <div class="col">
            <h3>æ•¸ä½è¡ŒéŠ·</h3>
            <p>å…¨æ–¹ä½æ•¸ä½è¡ŒéŠ·ç­–ç•¥ï¼Œæå‡ç·šä¸Šèƒ½è¦‹åº¦</p>
            <a href="#" class="btn">äº†è§£æ›´å¤š</a>
        </div>
        <div class="col">
            <h3>æŠ€è¡“æ”¯æ´</h3>
            <p>24/7 å°ˆæ¥­æŠ€è¡“æ”¯æ´ï¼Œç¢ºä¿ç³»çµ±ç©©å®šé‹è¡Œ</p>
            <a href="#" class="btn">äº†è§£æ›´å¤š</a>
        </div>
    </div>
</div>`
            };
            
            document.getElementById('htmlInput').value = samples[type] || '';
        }
        
        // è¼‰å…¥é è¨­ç¯„ä¾‹
        window.onload = function() {
            loadSample('styled');
        };
    </script>
</body>
</html>